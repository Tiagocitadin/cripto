<div class="crypto-container">
  <h2 class="title">Acompanhamento de Criptomoedas</h2>

  <div class="search-container">
    <input type="text" [(ngModel)]="searchTerm" 
           (input)="filtrarMoedas()"
           placeholder="Pesquisar moedas...">
  </div>

  <div class="currency-grid">
    <div *ngFor="let moeda of moedasFiltradas" class="currency-card">
      <label class="currency-label">
        <input type="checkbox"
               [checked]="moedasSelecionadas.includes(moeda)"
               (change)="onToggleMoeda(moeda, $event.target.checked)">
        {{ moeda }}
      </label>
    </div>
  </div>

  <div *ngIf="isLoading" class="loading-indicator">
    Carregando dados...
  </div>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div class="price-cards" *ngIf="moedasSelecionadas.length > 0">
    <div *ngFor="let moeda of moedasSelecionadas" class="price-card">
      <div class="card-header">
        <h3>{{ moeda }}</h3>
        <span class="price-change" [class.positive]="calcularVariacao(moeda) >= 0"
                                [class.negative]="calcularVariacao(moeda) < 0">
          {{ calcularVariacao(moeda) | number:'1.2-2' }}%
        </span>
      </div>
      
      <div class="card-body">
        <div class="price-row">
          <span>Compra:</span>
          <span>{{ dados[moeda]?.buy | number:'1.6-8' }}</span>
        </div>
        <div class="price-row">
          <span>Venda:</span>
          <span>{{ dados[moeda]?.sell | number:'1.6-8' }}</span>
        </div>
      </div>
      
      <div class="card-footer">
        <small>Atualizado: {{ dados[moeda]?.timestamp | date:'HH:mm:ss' }}</small>
      </div>
    </div>
  </div>

  <div *ngIf="moedasSelecionadas.length === 0" class="empty-state">
    Nenhuma moeda selecionada. Selecione ao menos uma para ver as cotações.
  </div>
</div>